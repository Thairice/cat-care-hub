# Story 1.6: Display Articles on Home Page from Contentful

## Status
**In Progress**

---

## Story

**As a** visitor,
**I want** to see a list of recent articles on the home page,
**so that** I can discover cat care content immediately upon arriving.

---

## Acceptance Criteria

1. Home page fetches articles from Contentful on server-side
2. Article cards displayed in responsive grid (1 column mobile, 2-3 columns desktop)
3. Each article card shows: featured image, title, excerpt, category, publish date
4. Images optimized using Next.js Image component
5. Graceful handling if no articles exist (show friendly message)
6. Article cards have hover effects for better UX
7. Categories displayed with color-coded badges
8. Fix Contentful API integration (currently returning "unknownContentType" error)

---

## Tasks / Subtasks

- [ ] Fix Contentful content type identifier (AC: 8)
  - [ ] Verify the API identifier in Contentful matches code
  - [ ] Update code if needed to match Contentful's actual content type ID
  - [ ] Test that articles fetch successfully

- [ ] Create ArticleCard component (AC: 2, 3, 4, 6, 7)
  - [ ] Create `app/components/ArticleCard.tsx`
  - [ ] Display featured image with Next.js Image
  - [ ] Display title, excerpt, category badge, publish date
  - [ ] Add hover effects (scale, shadow)
  - [ ] Make responsive

- [ ] Update home page to display articles (AC: 1, 2, 5)
  - [ ] Fetch articles using `getAllArticles()` helper
  - [ ] Display articles in responsive grid
  - [ ] Handle empty state gracefully
  - [ ] Replace placeholder text with real article cards

- [ ] Final verification
  - [ ] Verify articles display correctly
  - [ ] Test responsive grid on different screen sizes
  - [ ] Verify images load and are optimized
  - [ ] Test hover effects
  - [ ] Run build to ensure no errors

---

## Dev Notes

### Fixing Contentful Integration

The current error shows `"unknownContentType": "DOESNOTEXIST"`. This means the content type identifier in our code doesn't match what's in Contentful.

**Steps to fix:**
1. In Contentful UI: Content model → Article → Settings
2. Check the "API Identifier" field
3. Common possibilities:
   - `article` (lowercase) ✅ Expected
   - `Article` (capitalized) ❌ Would cause error
   - Something else

4. Update `lib/contentful-helpers.ts` with correct identifier

### ArticleCard Component

```typescript
// app/components/ArticleCard.tsx
import Image from 'next/image';
import Link from 'next/link';
import { ArticleEntry } from '@/types/contentful';

interface ArticleCardProps {
  article: ArticleEntry;
}

export default function ArticleCard({ article }: ArticleCardProps) {
  const { title, excerpt, category, slug, publishDate, featuredImage } =
    article.fields;

  const categoryColors: Record<string, string> = {
    'care-tasks': 'bg-blue-100 text-blue-800',
    behavior: 'bg-purple-100 text-purple-800',
    general: 'bg-gray-100 text-gray-800',
  };

  const imageUrl = featuredImage?.fields?.file?.url
    ? `https:${featuredImage.fields.file.url}`
    : '/placeholder-cat.jpg';

  return (
    <article className="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 hover:scale-[1.02] transform">
      <div className="relative h-48 w-full">
        <Image
          src={imageUrl}
          alt={title}
          fill
          className="object-cover"
          sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
        />
      </div>
      <div className="p-6">
        <div className="flex items-center gap-2 mb-3">
          <span
            className={`text-xs font-semibold px-3 py-1 rounded-full ${
              categoryColors[category] || categoryColors.general
            }`}
          >
            {category.replace('-', ' ').toUpperCase()}
          </span>
          <span className="text-xs text-gray-500">
            {new Date(publishDate).toLocaleDateString('en-US', {
              month: 'short',
              day: 'numeric',
              year: 'numeric',
            })}
          </span>
        </div>
        <h3 className="text-xl font-bold text-gray-900 mb-2 line-clamp-2">
          {title}
        </h3>
        <p className="text-gray-600 mb-4 line-clamp-3">{excerpt}</p>
        <Link
          href={`/articles/${slug}`}
          className="text-blue-600 hover:text-blue-800 font-medium inline-flex items-center"
        >
          Read More
          <svg
            className="w-4 h-4 ml-1"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M9 5l7 7-7 7"
            />
          </svg>
        </Link>
      </div>
    </article>
  );
}
```

### Updated Home Page

```typescript
// app/page.tsx
import { getAllArticles } from '@/lib/contentful-helpers';
import ArticleCard from './components/ArticleCard';

export default async function Home() {
  const articles = await getAllArticles();

  return (
    <>
      {/* Hero Section */}
      <section className="bg-gradient-to-r from-blue-500 to-purple-600 text-white">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 text-center">
          <h1 className="text-4xl md:text-6xl font-bold mb-6">
            Welcome to Cat Care & Education Hub
          </h1>
          <p className="text-xl md:text-2xl max-w-3xl mx-auto leading-relaxed">
            Your comprehensive resource for cat care tips, behavior insights,
            and expert-recommended products.
          </p>
        </div>
      </section>

      {/* Articles Section */}
      <section className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <h2 className="text-3xl font-bold text-gray-900 mb-8">
          Latest Articles
        </h2>

        {articles.length === 0 ? (
          <div className="text-center py-12">
            <p className="text-gray-600 text-lg">
              No articles found. Check back soon for cat care tips!
            </p>
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {articles.map((article) => (
              <ArticleCard key={article.sys.id} article={article} />
            ))}
          </div>
        )}
      </section>
    </>
  );
}
```

### Responsive Grid

- Mobile: 1 column (`grid-cols-1`)
- Tablet: 2 columns (`md:grid-cols-2`)
- Desktop: 3 columns (`lg:grid-cols-3`)

### Testing

**Manual Testing:**
1. Run `npm run dev`
2. Navigate to `http://localhost:3000`
3. Verify articles display with images
4. Test responsive design
5. Test hover effects
6. Click "Read More" (will be 404 - expected, article pages in future story)

**No automated tests required for MVP**

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-19 | 1.0 | Initial story creation | Dev Agent |

---

## Dev Agent Record

### Agent Model Used
*To be populated by dev agent*

### Debug Log References
*To be populated by dev agent*

### Completion Notes List
*To be populated by dev agent*

### File List
*To be populated by dev agent*

---

## QA Results

*To be populated by QA agent*
